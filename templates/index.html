{% extends "base.html" %}

{% block title %}å­¦ç”Ÿç®¡ç†ã‚·ã‚¹ãƒ†ãƒ {% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero">
    <div class="hero-content">
    <h2>å­¦ç”Ÿè¨˜éŒ²ã‚’ç®¡ç†ã™ã‚‹</h2>
    <p>å­¦ç”Ÿæƒ…å ±ã‚’ç°¡å˜ã«è¿½åŠ ã€è¡¨ç¤ºã€ç®¡ç†ã§ãã¾ã™</p>
    </div>
</section>

<!-- Add Student Form -->
<section class="form-section">
    <h3>æ–°ã—ã„å­¦ç”Ÿã‚’è¿½åŠ </h3>
    <form action="{{ url_for('add_student') }}" method="POST" class="student-form" id="studentForm">
    <div class="form-row">
        <div class="form-group">
        <label for="name">æ°å *</label>
        <input type="text" id="name" name="name" required
            placeholder="æ°åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„" maxlength="100">
    </div>

    <div class="form-group">
        <label for="student_number">å­¦ç”Ÿç•ªå· *</label>
        <input type="text" id="student_number" name="student_number" required
            placeholder="å­¦ç”Ÿç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"  maxlength="20">
        </div>

        <div class="form-group">
        <button type="submit" class="btn btn-primary">
            <span class="btn-icon">+</span>
            ç”Ÿå¾’ã‚’è¿½åŠ 
        </button>
        </div>  
    </div>
    </form>
</section>

<!-- Search and Controls -->
<section class="controls-section">
    <div class="controls-row">
    <form action="{{ url_for('search_students') }}" method="GET" class="search-form">
        <div class="search-group">
        <input type="text" name="query" value="{{ search_query or '' }}" 
            placeholder="åå‰ã¾ãŸã¯å­¦ç”Ÿç•ªå·ã§æ¤œç´¢â€¦">
        <button type="submit" class="btn btn-secondary">
            <span class="btn-icon">Q</span>
            æ¤œç´¢
        </button>
        {% if search_query %}
        <a href="{{ url_for('index') }}" class="btn btn-outline">
            æ¤œç´¢ã‚’ã‚¯ãƒªã‚¢
        </a>
        {% endif %}
        </div>
    </form>

        <div class="stats">
            <span class="stat-badge">å­¦ç”Ÿæ•°: {{ students|length }}</span>
        </div>
    </div>
</section>

<!-- Students Display -->
<section class="students-section">
    <h3>ç™»éŒ²æ¸ˆã¿ã®å­¦ç”Ÿ</h3>

    {% if students %}
        <div class="students-grid">
            {% for student in students %}
                <div class="student-card" data-student-id="{{ student[0] }}">
                    <div class="student-header">
                        <h4 class="student-name">{{ student[1] }}</h4>
                        <form action="{{ url_for('delete_student', student_id=student[0]) }}" 
                            method="POST" class="delete-form"
                            onsubmit="return confirm('{{ student[1] }} ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ');">
                        <button type="submit" class="btn-delete" title="å­¦ç”Ÿã‚’å‰Šé™¤">
                            ğŸ—‘
                        </button>
                    </form>
                </div>
                <div class="student-info">
                    <div class="info-item">
                        <span class="label">IDï¼š</span>
                        <span class="value">{{ student[2] }}</span>
                    </div>
                    <div class="info-item">
                        <span class="label">ç™»éŒ²æ—¥ï¼š</span>
                        <span class="value">{{ student[3].strftime('%Y-%m-%d %H:%M') }}</span>
                    </div>
                </div>
                <div class="student-id">#{{ student[0] }}</div>
            </div>
        {% endfor %}
    </div>
    {% else %}
        <div class="empty-state">
            <div class="empty-icon"></div>
            <h4>å­¦ç”ŸãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“</h4>
            <p>
                {% if search_query %}
                    æ¤œç´¢ â€œ{{ search_query }}â€ ã«ä¸€è‡´ã™ã‚‹å­¦ç”ŸãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚
                    <a href="{{ url_for('index') }}">ã™ã¹ã¦ã®å­¦ç”Ÿã‚’è¡¨ç¤º</a>
                    {% else %}
                        ã¾ã å­¦ç”ŸãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ä¸Šã®ãƒ•ã‚©ãƒ¼ãƒ ã‚’ä½¿ç”¨ã—ã¦æœ€åˆã®å­¦ç”Ÿã‚’è¿½åŠ ã—ã¦ãã ã•ã„ï¼
                {% endif %}
            </p>
        </div>
    {% endif %}
</section>
{% endblock %}
